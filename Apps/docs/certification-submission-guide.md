---
ms.author: oromalle
title: Microsoft 365 认证提交指南
author: orionomalley
description: Microsoft 365 认证提交指南粒度视图
keywords: 应用认证团队 Microsoft 365 安全合规性 m365
ms.topic: conceptual
ms.service: attestation
ms.openlocfilehash: 4d0f09b3a1dd6bde7022e93d08a491e2855d90a7
ms.sourcegitcommit: e97156a6eaf1d5ec5c26fd14add210a92bacd944
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/28/2021
ms.locfileid: "52070861"
---
# <a name="microsoft-365-certification-submission-guide"></a>Microsoft 365 认证提交指南

**本文内容：**
- [简介](#introduction)
- [先决条件](#prerequisites) 
- [Microsoft 365 认证规范更新](#microsoft-365-certification-specification-updates)
- [认证范围](#certification-scope)
- [认证过程](#certification-process)
- [合规性证据](#compliance-evidence) 
- [初始文档提交](#initial-document-submission) 
- [证据收集和评估活动](#evidence-collection-and-assessment-activities)
- [认证条件](#app-certification-criteria)
- [Application Security](#application-security)
- [操作安全性](#operational-security) 
- [数据处理安全和隐私](#data-handling-security-and-privacy)
- [可选的外部合规性框架审查](#optional-external-compliance-frameworks-review)
- [附录 A](#appendix-a)
- [附录 B](#appendix-b) 
- [附录 C](#appendix-c) 
- [附录 D](#appendix-d) 
- [附录 E](#appendix-e) 
- [附录 F](#appendix-f) 
- [附录 G ](#appendix-g)
- [了解详细信息](#learn-more) 
- [术语表](#glossary) 


## <a name="introduction"></a>简介

作为 Microsoft 365 应用合规性计划的一部分，Microsoft 365 认证向企业组织提供保证和信心，确保数据和隐私在将第三方开发人员应用/外接程序集成到 Microsoft 365 平台时受到充分保护和保护。 通过验证的应用程序和加载项在整个 **Microsoft 365** 生态系统中将被指定为 Microsoft 365 认证。 

通过参与 Microsoft 365 认证计划，即表示你同意这些补充条款，并遵守适用于你参与 Microsoft Corporation ("、"Microsoft"、"we"、"us"或"our") 的 Microsoft 365 认证计划的任何随附文档。 你表示并保证你有权代表自己、公司以及/或其他实体接受这些 Microsoft 365 认证补充条款（如果适用）。 我们可能会随时更改、修订或终止这些补充条款。 你在任何更改或修正后继续参与 Microsoft 365 认证计划意味着你同意新的补充条款。 如果你不同意新的补充条款或我们终止这些补充条款，则必须停止参与 Microsoft 365 认证计划。

本文档面向 ISV (Independent Software Vendors) ，提供有关 Microsoft 365 认证过程、启动该过程的先决条件以及 ISV 必须拥有的特定安全控制的详细信息。  Microsoft 365 应用合规性计划的常规信息位于 Microsoft 365 应用合规性计划页面 [下](https://docs.microsoft.com/microsoft-365-app-certification/overview)。 

> [!IMPORTANT]
> 目前，Microsoft 365 认证受到限制：
>* Microsoft Teams 应用程序 (选项卡、聊天机器人等) 。
>* Sharepoint 应用程序/外接程序
>* Office 外接程序 (Word、Excel、PowerPoint、Outlook、Project、OneNote) 

## <a name="prerequisites"></a>先决条件

### <a name="publisher-attestation"></a>发布者证明

在被授予 Microsoft 365 认证过程之前，你必须已完成发布者证明。 但是，你可以先启动 Microsoft 365 认证过程，然后完成发布者证明。  

### <a name="read-the-microsoft-365-certification-specification"></a>阅读 Microsoft 365 认证规范

Microsoft 建议所有 ISV (独立软件供应商) 完整阅读此 Microsoft 365 认证规范，以确保范围内环境和应用/外接程序符合所有适用的控制措施。 这将有助于确保评估过程顺畅。

## <a name="microsoft-365-certification-specification-updates"></a>Microsoft 365 认证规范更新 

预计大约每 6 到 12 个月更新一次 Microsoft 365 认证规范。 这些更新可能会引入新的目标安全域和/或安全控件。 更新将基于开发人员的反馈、威胁环境的变化，并随着计划的成熟而提高计划的安全基线。 

已启动 Microsoft 365 认证评估的 ISV 可以继续使用在评估启动时有效的 Microsoft 365 认证规范版本进行评估。 所有新提交（包括年度重新认证）都需要根据发布的版本进行评估。

> [!NOTE]
> 你无需遵守此 Microsoft 365 认证规范内的所有控制措施，即获得认证。 但是，对于本 Microsoft 365 认证 (中讨论的每个安全域，) 不会泄露的阈值。 某些控件将被分类为"硬失败"，这意味着缺少这些安全控制将导致评估失败。 

## <a name="certification-scope"></a>认证范围

**范围内环境** 是支持传递应用/加载项代码的环境，并支持应用/加载项可以与应用/加载项通信的任何后端系统。 除非已进行适当的分段且已连接到的环境不会影响范围内环境的安全性，否则任何其他已连接环境也将包含在范围内。 任何灾难恢复环境也需要包括在评估范围内，因为如果主环境发生任何情况，则需要这些环境来安装服务。  范围 **内系统组件一** 词引用范围内环境中使用的所有   设备和系统。  作用域内组件包括但不限于：
* Web 应用程序 () 。
* 服务器。
* 防火墙 (或等效) 。
* 开关。
* 负载平衡器。
* 虚拟基础结构。
* 云提供商 Web 管理门户 

> [!IMPORTANT]
> 范围内环境必须具有 DMZ，并且应用/外接程序的支持环境必须与内部业务系统和公司环境分段，从而将评估活动的范围限定为仅范围内系统。 认证分析师将在评估期间验证分段技术，并查看渗透测试报告，其中应包括测试，以验证使用的任何分段技术的有效性。

### <a name="infrastructure-as-a-service-iaas-platform-as-a-service-paas-and-software-as-a-service-saas"></a>IaaS 服务 (基础结构) 、平台为服务 (PaaS) 和软件 (SaaS)  
其中 IaaS 和/或 PaaS 用于支持审核中的应用程序或外接程序代码交付的基础结构，云平台提供商将负责在整个认证过程中评估的一些安全控制。 因此，云平台提供商需要通过外部合规性报告（如 [PCI DSS](bookmark://pci-dss)合规性   证明 (AOC) 、ISO27001 或 [SOC 2](bookmark://soc-2)类型 II 报告）向认证分析师提供独立的外部安全最佳做法验证。   

附录 F 根据以下部署类型以及应用/外接程序是否将传输 M365 数据，详细说明可能适用的安全控件： 
* ISV 托管 
* IaaS 托管 
* PaaS/Serverless Hosted 
* 混合托管 
* 共享托管 

在部署 IaaS 或 PaaS 时，你需要提供在这些部署类型中托管的环境的证据。

### <a name="sampling"></a>采样

支持认证评估的证据请求应基于范围内系统组件的示例，考虑不同的操作系统、设备的主要功能和不同的设备类型。 将在认证过程开始时选择一个合适的示例。 下表应用作示例大小的指导：

|总体大小              | 示例                  |
|---------------------------- |-------------------------|
|<5|1|
|>5 & <10|2|
|>9 & <25|3|
|>24|4 |

> [!NOTE]
>如果在初始示例中包含的设备之间发现了差异，则评估期间可能会增加样本大小。 

## <a name="certification-process"></a>认证过程

在开始认证过程之前，你需要已成功启动或完成发布者证明。 你的证明响应将用于支持 Microsoft 365 认证过程，并继续如下操作： 

1. 查看 Publisher 证明文档以确保与当前环境保持一致 
2. 通过电子邮件请求获得 Microsoft 365 认证 <AppCert@microsoft.com> 
3. 认证分析师将在开始 Microsoft 365 认证过程之前打开一个对话   
4. 提交 [初始文档提交](#initial-document-submission)
5. 认证分析师将提供需要证据的控制措施列表，从而正式启动 Microsoft 365 认证流程
6. 提交证据，证明在 60 天内满足所有范围内 Microsoft 365 认证控制措施，以完成 Microsoft 365 认证 

> [!IMPORTANT]
> **提交期限：** 预计评估过程平均需要 15 天，但你可以及时响应证据请求。 Microsoft 建议确保已阅读此认证提交指南，并确信你可以满足其中提供的控制措施，并且可在开始认证过程之前提供足够证据。 开始认证过程后，最多允许 60 天完成评估，否则已收集的证据将过时。 如果在 60 天时间段后未达到成功评估，则提交将失败，并且必须重新开始该过程。 如果由于不符合 Microsoft 365 认证规范或 60 天时间段已到达且未提供足够证据而颁发失败，Microsoft 不会公开失败结果。 

## <a name="compliance-evidence"></a>合规性证据

尽管这不是必需的，但如果您当前符合其他外部安全框架，您可以选择使用这些认证来满足某些 Microsoft 365 认证控制措施。 认证分析师将检查任何受支持的外部安全框架的范围和安全控制范围，以确定可以从 Microsoft 365 认证评估中排除哪些控制措施，从而提供外部安全框架的范围，包括 Microsoft 365 认证评估的范围环境。 

认证分析师将尝试将现有外部安全框架与 Microsoft 365 认证规范保持一致。 但是，如果支持文档无法保证 Microsoft 365 认证控制措施已作为外部安全框架审核/评估的一部分进行评估，则需要提供所实施控制措施的其他证据。 

目前，可用于支持 Microsoft 365 认证评估的外部安全框架包括：

*  [ISMS](#isms) /[IEC](#iec) - IS0/IEC 27001 规范 
*  [PCI DSS](#pci-dss)
*  [SOC 2](#soc-2)

文档必须充分证明 Microsoft 365 认证的范围内环境已包含在这些外部安全框架范围内。 通过接受由信誉良好的外部第三方公司进行的有效认证的证据，可以验证这些安全框架。 这些信誉良好的公司必须是相关合规性计划的国际认证机构的成员。请参阅 [ISO](https://www.iso.org/certification.html) 27001 ISO 认证和标准化 [标准以及](https://www.pcisecuritystandards.org/assessors_and_solutions/qualified_security_assessors) PCI DSS (QSA) 认证。 

下表重点介绍了认证分析师在此验证过程中所需的文档：

| **标准** | **要求** |
| ----- | ----- |
| **[ISO 27001](#iso-27001)** | 需要面向公众的 ISO  () 声明版本和颁发的 ISO 27001 证书的副本。  该 ISO 总结了你在 114 个信息安全控制措施中的位置，并用于确定 ISO 27001 证书中是否排除任何不令人信意的控制措施。 如果无法通过查看面向公众的 ISO 版本来确定这一点，那么，如果 ISO 27001 将用于验证某些 Microsoft 365 认证规范控件，则分析员可能需要访问完整的 ISO。  除了验证 ISO 27001 评估活动的范围之外，分析师还将确认审核公司的有效性，如上所述。|
|**[PCI DSS](#pci-dss)**| 必须提供 AOC (一) 级别 **1** 合规性证明文档，以清楚地标识范围内应用程序和系统组件。  自我评估 AOC **不会** 被接受为会议安全最佳做法的证据。 AOC 将用于确定哪些 Microsoft 365 认证规范控制措施已作为 PCI DSS 评估的一部分进行评估和确认。|
|**[SOC 2](#soc-2)**|**SOC 2 (类型 I** 或类型 II) 报告必须是最近 15 个月内发布的当前 (，并且声明的时间段是从) 年 27 个月内开始的，以用作符合此 Microsoft 365 认证规范中任何评估控制措施的证据。|


## <a name="microsoft-365-certification"></a>Microsoft 365 认证

支持的外部安全框架可以用作满足某些 Microsoft 365 认证控制措施的证据。 在考虑外部安全框架之前，认证分析师将使用上面提交的文档查看外部安全框架的范围和安全控制范围。 

以下附录可用于确定外部安全框架和 Microsoft 365 认证规范之间可能存在的潜在差异，如下所示： 

|**框架** | **其他注意事项** |
|-------------- | --------------------|
|ISO 27001| [**附录 C：**](#appendix-c)证据收集 – ISO 27001 的增量。|
|PCI DSS | [**附录 D：**](#appendix-d)证据收集 – PCI DSS 的增量。|
|SOC 2| [**附录 E：**](#appendix-e)证据收集 – SOC 2 的增量。|

> [!NOTE]
> 尽管上述外部安全标准/框架可以提交为证据，以满足某些 Microsoft 365 认证控制措施的要求，但通过 Microsoft 365 认证并不意味着你将成功通过针对这些标准/框架的审核。 Microsoft 365 认证规范只是这些安全标准/框架的一小部分，它允许 Microsoft 在安全状态方面获得一级保证。

## <a name="initial-document-submission"></a>初始文档提交

初始文档提交将帮助认证分析师执行范围确定范围，并确定评估范围内的内容。 此后，你需要提交用于执行评估的支持文档和证据。 初始提交必须包含下面指定的信息：

| **文档 &nbsp; 概述**     |   **文档详细信息**  |
| -------------------------| -----------------------------|
|**应用/加载项说明** | 应用程序/外接程序的用途和功能的说明。 这应该为认证分析师提供对应用/加载项功能及其用途的深入了解
|**渗透测试报告** |过去 12 个月内完成的渗透测试报告。 此报告必须包含支持部署应用/添加的环境，以及支持应用/加载项操作的其他环境。 **注意** ：如果不执行年度渗透测试，可以选择通过认证过程完成测试。|
|**体系结构图**|逻辑体系结构图，表示应用/加载项支持基础结构的简要概述。 这必须 **包括所有** 托管环境和支持应用/外接程序的基础结构。 此图必须描述环境中所有不同的支持系统组件，以帮助认证分析师了解范围内的系统并帮助确定采样。 另请指示使用哪种托管环境类型;ISV 托管、IaaS、PaaS 或混合。 **注意：** 使用 SaaS 时，请指明用于在环境中提供支持服务的各种 SaaS 服务。|
|**公共占用空间** | 详细说明 **支持** 基础结构使用的所有公用 IP 地址和 URL。 这必须包括分配给环境的完整可路由 IP 范围，除非已实现适当的分段以拆分使用中的范围 (因此需要足够的分段证据) |
|**数据流图** |详细说明以下内容的流程图：
||&#x2713; M365 数据流流入和流出应用/外接程序 ([EUII](#euii) 和 [OII](#oii) ) 。|
||&#x2713;支持基础结构中的 M365 数据流 (适用) |
||&#x2713;图表突出显示了存储在何处和存储哪些数据、如何将数据传递给外部第三方 (包括哪些第三方) 以及如何在开放/公共网络和其余网络传输过程中保护数据的详细信息。|
|**API 终结点详细信息**| 应用使用的所有 API 终结点的完整列表。 若要帮助了解环境范围，请提供环境中 API 终结点位置。                                
|**Microsoft API 权限**| 提供文档 **，** 详细说明所有使用的 Microsoft API 以及请求应用/外接程序正常运行的权限以及请求的权限的理由|
|**数据存储类型** |数据存储和处理描述：|
||&#x2713;接收和存储客户 M365 数据 [EUII](#euii) 和 [OII](#oii) 的程度|
||&#x2713;数据保留期。|
||&#x2713;捕获客户 M365 数据的原因。|
||&#x2713;存储客户 M365 数据的位置 (应包含在上面提供的数据流图中) 。|
|**合规性确认**|Publisher 证明提交中包含的外部安全框架的支持文档，或查看 Microsoft 365 认证控制措施时考虑的文档。 目前支持以下三种：|
||&#x2713; AOC (PCI [DSS](#pci-dss)) 。|
||&#x2713; [SOC 2](#soc-2) 类型 I/类型 II 报告。|
||&#x2713; [ISMS](#isms)  /  [IEC](#iec) - 1S0/IEC 27001 SoA (适用性声明) 认证。|
|**Web 依赖项**|列出应用/加载项使用的当前运行版本的所有依赖项的文档。|
|**软件清单**|最新软件清单，包括范围内环境中使用的所有软件以及版本。|
|**硬件清单**| 支持基础结构使用最新的硬件清单。 这将用于在执行评估阶段时帮助采样。 如果您的环境包括 PaaS，请提供使用的服务的详细信息。|

## <a name="evidence-collection-and-assessment-activities"></a>证据收集和评估活动

通过可靠的证据收集和评估活动，认证分析师将能够评估你的安全状况，以获取足够级别的数据安全保证，并遵循 Microsoft 365 认证规范控制措施。 认证分析师将按如下方式实现此目的： 

**证据收集**

* 初始文档，在上文的初始 [文档提交部分中](#initial-document-submission) 突出显示 
* 策略文档 
* 处理文档 
* 系统配置设置 
* 更改票证 
* 更改控件记录 
* 系统报告

各种方法将用于收集完成评估过程所需的证据。  此证据收集可能的形式为： 
* 文档 
* 屏幕截图 
* 访谈 
* 屏幕共享 

在评估过程中将确定使用的证据收集技术。 

**评估活动**

认证分析师将查看你提供的证据，以确定你是否充分满足此 Microsoft 365 认证规范中的控制措施。 

如果可能，为了缩短完成评估所需时间，应提前提供初始文档提交中详述的任何或 [](#initial-document-submission)   所有文档。

认证分析师将首先查看初始文档提交和发布者证明信息中提供的证据，以确定适当的查询行、采样大小以及需要获取更多证据，如上所述。  认证分析师将分析收集的所有信息，以得出如何以及是否满足此 Microsoft 365 认证规范中的控制措施结论。 

## <a name="app-certification-criteria"></a>应用认证条件

您的应用程序、支持基础结构和支持文档将跨以下安全域进行评估：

1. [**Application Security**](#application-security)
1. [**操作安全性/安全部署**](#operational-security)
1. [**数据处理安全和隐私**](#data-handling-security-and-privacy)
1. [**可选的外部合规性框架审查**](#optional-external-compliance-frameworks-review)

其中每个安全域都包括特定的关键控制措施，这些控制措施包含一个或多个特定要求，这些要求将在评估过程中进行评估。 为确保 Microsoft 365 认证对各种规模的开发人员均包含，四个安全域均使用评分系统进行评估，以确定每个域的总体分数。 根据未达到 Microsoft 365 认证控制措施的感知风险，每个 Microsoft 365 认证控制措施的分数在 1 (低) 和 3 (高) 之间分配。 这四个安全域都有一个被视为通过的最小百分比标记。 此规范的某些元素包括一些自动失败条件：

- API 权限不遵循 PoLP (最小特权) 。  
- 没有渗透测试报告（如果需要）。
- 无反恶意软件防御
- 未用于保护管理访问的多重身份验证。  
- 无修补过程。  
- 没有合适的 [GDPR](#gdpr) 隐私声明。  

## <a name="application-security"></a>Application Security

应用程序安全域重点关注以下三个方面： 
* GraphAPI 权限验证 
* 外部连接性检查
* 应用程序安全测试 

**GraphAPI 权限验证**

执行 GraphAPI 权限验证以验证应用/外接程序不会请求过度许可的权限。 这是通过手动检查请求的权限来实施。 认证分析师将针对发布者证明提交交叉引用这些检查，并评估所请求的访问级别以确保满足"最小特权"做法。 如果认证分析师认为不满足这些"最小特权"做法，认证分析师将就验证所请求权限的业务理由进行开放式讨论。 在此审阅过程中发现的与发布者证明提交的任何差异也会获得反馈，以便可以更新你的发布者证明。 

**外部连接性检查**

作为评估的一部分，分析员将执行应用程序功能的演练，以标识 M365 外部的连接。  任何未标识为 Microsoft 或直接连接到服务的连接都将在评估期间进行标记和讨论。

**应用程序安全测试**

充分审查与应用/外接程序和支持环境相关的风险对于为客户提供应用/外接程序安全性的保证至关重要。 如果应用程序具有与 Microsoft 未发布的任何服务的任何连接，则必须执行渗透测试形式的应用程序安全测试。 如果你的应用在没有连接到任何非 Microsoft 服务或后端的情况下独立运行，则不需要渗透测试。


### <a name="penetration-testing-scope"></a>渗透测试范围

渗透测试 **活动必须** 包括支持应用程序/外接程序部署 (例如;其中，应用程序/外接程序代码的托管位置通常是清单文件) 中的资源，以及支持应用程序/外接程序应用程序运行的其他 (例如;如果应用/外接程序与 Microsoft 365 外部的其他 Web 应用程序) 。  定义范围时，需要小心以确保所有渗透测试活动中还包括任何会影响范围内环境安全性的"已连接到"系统或环境。 

当使用技术将范围内环境与其他环境分割时，渗透测试活动必须验证这种分段技术的有效性。 这必须在渗透测试报告中详细说明。 
 

### <a name="testspecification"></a>测试规范 

|测试 | 控件 |
|-------|-----------|
|**渗透测试**| 应用程序和基础结构渗透 **测试** 必须每 12 个月 (一次，) 一家信誉良好的独立公司执行。 在渗透测试完成后的一个月内或更早地完成对已识别的关键和高风险漏洞的修正，具体取决于已记录修补过程。IP 地址、 (API 终结点等的完整外部占用空间必须包含在渗透测试范围内) 并且必须记录在渗透测试报告中。IP 地址 (URL、API 终结点等的完整外部占用空间必须包含在渗透测试范围内) 并且必须记录在渗透测试报告中。                                                                                                                                                                           Web 应用程序渗透测试必须包括所有漏洞类;例如，最新的 OWASP 前 10 或 SANS 前 25 个 CWE。                                                                                                                                                                                不需要由渗透测试公司重新测试识别的漏洞 — 修正和自我审查已足够，但评估期间必须提供足以证明修正的足够证据。 |

### <a name="application-security-testing-reportreview"></a>应用程序安全测试报告审阅

将审核渗透测试报告，以确保没有满足以下自动失败 **条件的漏洞：**

* 存在不受支持的操作系统。 

* 存在默认、可枚举或可猜测的管理帐户。

* 是否存在SQL注入风险。*

* 存在跨网站脚本。*

* 存在目录遍历 (路径) 漏洞。*

* 存在 HTTP 漏洞，例如标头响应拆分、请求分割和异步攻击。*

* 存在源代码泄漏 ( [包括 LFI](#lfi)) 。*

* CVSS 修补程序管理准则定义的任何关键分数或高分。

* 任何重大技术漏洞，很容易利用它来破坏大量 EUII 或 OUI。

*不考虑漏洞 CVSS 分数

> [!IMPORTANT]
>报告必须能够提供足够保证，确保可以演示应用程序安全测试规范一节中详述的所有内容。


### <a name="penetration-testing-requirements-and-cost"></a>渗透测试要求和成本

对于当前不参与渗透测试的 ISV，渗透测试包含在 Microsoft 365 认证下。 Microsoft 将安排并支付渗透测试的成本，最多 12 天的手动测试。 渗透测试成本根据测试环境所需的天数计算。 任何超过 12 天的测试费用都将由 ISV 负责。 ISV 还将负责证明在授予认证之前已修复渗透测试中标识的漏洞，但不需要生成干净报告。

一旦安排渗透测试，ISV 将负责与重新计划和取消相关的费用，如下所示：

| **重新计划费用时间刻度** | **应付款比例** |
|------------------|------------------------|
| 在计划开始日期前 30 天之前，收到重新计划请求。 | 0% 付款 |
| 在计划开始日期前 8 到 30 天内收到重新计划请求。 | 25% 应付款 |
| 在计划开始日期前 2 到 7 天内收到公司重新预订日期的重新计划请求。| 50% 应付款 |
| 在开始日期前 2 天内收到重新计划请求。 | 100% 应付款 |

| **取消费用时间刻度** | **应付款比例** |
|------------------|------------------------|
| 取消请求在计划开始日期前 30 天之前收到。 | 25% 应付款 |
| 取消请求在计划开始日期前 8 到 30 天收到。 | 50% 应付款 |
| 在计划开始日期前 7 天内收到的取消请求。 | 90% 应付款 |

## <a name="operational-security"></a>操作安全性

此域衡量应用的支持基础结构和部署过程与安全最佳做法的一致性。

### <a name="test-specification"></a>测试规范

|测试 | 控件 |
| ------------------------|------------------------------ |
| **恶意软件保护** | 您必须在通常受恶意软件影响的所有范围内系统上部署恶意软件保护机制。 这些保护机制可能包括使用防病毒软件或防止恶意软件的应用程序控制技术。 使用防病毒软件或应用程序控制时，它必须满足以下条件。                                                                                            防病毒 (包括反恶意软件产品) 必须满足以下条件： |
||&#x2713;防病毒软件正在范围内的所有系统组件上运行。|
||&#x2713;防病毒软件在 (30 天内保持) 。|
||&#x2713;防病毒签名在 1 天内 (保持最新) 。|
||&#x2713;必须配置访问时扫描和/或定期扫描以及通知。  如果使用访问扫描，则还必须配置每周扫描，但是如果未配置访问扫描，则必须配置每日扫描。|
||&#x2713;防病毒软件 **的配置** 必须如下所示。|
||&emsp;&#x25fc;阻止可疑恶意软件。|
||&emsp;&#x25fc;隔离可疑恶意软件。|
||&emsp;&#x25fc;对可疑恶意软件发出警报。|
||&#x2713; **防病毒软件必须配置为** 记录所有活动。
||&#x2713;策略和过程 **必须** 到位，以推广强大的反恶意软件做法。|
||或|
||必须在所有范围内系统上配置应用程序控件，以满足以下要求：|
||&#x2713;允许对范围内系统组件执行的所有允许的应用程序都必须得到组织正式批准。|
||&#x2713;组织必须维护已批准应用程序的完整列表以及该应用程序的业务理由。|
||&#x2713;特定应用程序控制机制必须完整记录：即列入白名单的位置;代码签名等。|
||&#x2713;应用程序控件必须配置为文档。|
||&#x2713;已记录的应用程序审批流程必须已就位且可审核。|
|**修补程序管理**|**您必须** 已制定有文档的修补策略和过程，以确保及时进行修补。 必须 **建立一** 个可靠的流程，以根据 CVSS V3.1 建议的风险排名分数或等效评分分类识别、排名和修补新的安全漏洞： 
||**CVSS** v3.1 (中建议的风险排名分数范围) |
||&emsp;**关键**：9.0 - 10.0。|
||&emsp;**高**：7.0 - 8.9。|
||&emsp;**中等**：4.0 - 6.9。|
||&emsp;**低**：0.1 - 3.9。|
||&emsp;**无**：0.0 |
|| **重要** 说明：识别新漏洞的过程必须足够可靠，以便根据已定义的已记录修补窗口识别和修补漏洞。 |
|**Patching**|&#x2713;任何严重、高或中等风险问题都必须在ISV 预先确定且有记录的时间范围内进行修复，ISV 代表必须解决问题之前所解决的 **最短时段。**  尽管修补窗口由 ISV 定义，但该窗口需在合理的时间范围内。 例如，修复关键漏洞的三个月并不合理，因此在 Microsoft 365 认证评估中被拒绝。|
||&#x2713;有关如何执行修补的策略和过程必须已制定，并且必须包括环境中使用的所有适用的操作系统、应用程序和软件组件。 这包括应用/加载项中使用的任何 Web 依赖项。|
||&#x2713;不得在环境中使用供应商不再支持的软件组件和操作系统。  必须 **制定支持** 策略，以确保将不受支持的软件组件/操作系统从环境中删除，并且必须制定一个流程来确定软件组件何时结束使用。|
|**漏洞扫描**|漏洞扫描必须包括：|
||&#x2713;针对基础结构和 Web 应用程序扫描的作用域内环境的完整公共占用 (URL 和 IP 地址执行季度外部漏洞) 。|
||&#x2713;按季度验证的内部漏洞扫描对作用域内系统组件执行， (PaaS) 。|
||&#x2713;记录漏洞修正策略必须已制定，以确保系统组件不会受到已知漏洞的影响，具体方法为根据定义的 CVSS **** 建议的风险排名分数 (修复漏洞的时间线，) 。|
||&#x2713;执行持续重新扫描，直到按照ISV 的修正策略的定义，在要求的时间线内修复确定的风险排名漏洞。 尽管修正时间线由 ISV 定义，但该窗口需在合理的时间范围内。 例如，修正关键漏洞的三个月在 Microsoft 365 认证评估中并不合理，因此被拒绝。|
|**防火墙**|支持基础结构应具有防火墙或 (，其中将按如下) 使用云服务：|
||&#x2713; **必须** 安装在公开范围内环境的所有 Internet 连接上。|
||&#x2713; **所有** DMZs (安全区域) 任何受信任的网络之间安装。|
||&#x2713;所有公共访问 **必须** 终止于 DMZ 安全 (区) 。 |
||&#x2713;安装到生产环境之前，必须更改默认管理凭据。|
||&#x2713;任何方向 (范围内防火墙允许的所有流量) 必须经过审批过程，并且所有协议、服务和端口都必须记录有业务理由。|
||&#x2713;防火墙规则必须与记录允许的规则一起配置。|
||&#x2713;，必须在所有防火墙非控制台管理界面上启用强加密，以遵守附录 **B。**|
||&#x2713;必须针对防火墙管理 (启用 MFA) 多重身份验证。 |
||&#x2713;防火墙 **审查必须至少每** 六个月执行一次。|
||认证分析将检查防火墙规则基础，以检查是否存在流向潜在第三方出口流量以验证外部第三方数据共享。  |
||**WAF (Web 应用程序) 。** 如果部署 WAF 或等效措施以帮助防范 Web 应用程序威胁和漏洞，将提供额外的信用额度。 如果存在，支持策略 **和过程应** 随以下 WAF 配置一起到位： |
||&#x2713; WAF 应在主动防御模式下运行 (自动阻止识别的攻击) 或在监视模式下 (主动监视/调查警报) 。|
||&#x2713;配置为支持 SSL 卸载的[WAF。](#ssl)|
||&#x2713; WAF 应按照 [OWASP](#owasp) **** 核心规则集   (3.0 或 3.1) 进行配置，以防范以下大多数问题：|
||&emsp;&#x25fc;协议和编码问题。|
||&emsp;&#x25fc;标头注入、请求拆分和响应拆分。|
||&emsp;&#x25fc;文件和路径遍历攻击。|
||&emsp;&#x25fc;远程文件包含 (RFI) 攻击。|
||&emsp;&#x25fc;远程代码执行攻击。|
||&emsp;&#x25fc; PHP 注入攻击。|
||&emsp;&#x25fc;跨网站脚本攻击。|
||&emsp;&#x25fc; SQL注入攻击。|
||&emsp;&#x25fc;会话修复攻击。|
|**更改控件**|必须 **制定更改控制** 策略和过程，以确保以旨在维护环境的安全性、稳定性和完整性的方式实现更改。 需要以下 **更改控制条件** ：|
||&#x2713;职责分离 - 开发和测试环境必须与生产环境分开。|
||&#x2713;生产环境 **中的敏感数据不得** 在开发/测试环境中使用。|
||&#x2713;引入生产环境之前，必须在测试/开发环境中测试所有更改。|
||&#x2713;投入生产 **之前** ，将引发 **和** 授权更改请求。|
||&#x2713;更改请求至少 **必须包括：**|
||&emsp;&#x25fc;影响文档。|
||&emsp;&#x25fc;记录退出过程。|
||&#x2713;更改 **请求必须** 标记为已完成，只有在成功执行功能测试之后。|
|**安全软件开发/部署**|安全性需要处于软件开发实践的最前端，以最大限度地降低将编码漏洞引入应用/外接程序的风险，从而维护安全的环境和保护数据。 以下软件开发安全做法 **必须** 到位： |
||&#x2713;您必须已建立和记录涵盖整个软件开发生命周期的软件开发过程。|
||&#x2713;所有代码更改都必须由原始开发人员外的其他用户进行审阅和授权过程。|
||&#x2713;安全编码实践和审查技术 **必须** 解决 [OWASP 前 10](https://owasp.org/www-project-top-ten) 或 SANS 前 [25](https://www.sans.org/top25-software-errors) 大 CWE 漏洞类的问题。|
||&#x2713; **开发人员必须至少** 每年接受安全软件编码培训。|
||&#x2713;代码 **库必须** 受 MFA 保护。|
||&#x2713;必须实施适当的 **访问控制** ，以保护代码库免受恶意代码修改。|
||**注意**：Microsoft 发布了 [](https://www.microsoft.com/en-us/securityengineering/sdl/)SDL 安全 (生命周期) ，Microsoft 遵循它以支持其产品中的安全保证和合规性要求。 SDL 通过减少软件漏洞的数量和严重性来帮助开发人员构建更安全的软件，同时降低开发成本。|
|**帐户管理**| 作用域内系统组件帐户管理以及支持策略和过程 **必须满足** 以下要求： |
||&#x2713;在 (系统组件) 或删除供应商或 ISV 用户的默认凭据。 |
||&#x2713;帐户创建、修改 **和删除必须** 经过已建立的审批流程。|
||&#x2713;超过 3 个月的帐户必须禁用或删除，因此 ISV 需要具有实现此目的的机制。 |
||&#x2713;强密码策略或其他合适的 **缓解必须配置为** 保护用户凭据。 以下密码策略应用作指南：|
||&emsp;&#x25fc;最短密码长度为 8 个字符|
||&emsp;&#x25fc;尝试次数不超过 10 次的帐户锁定阈值|
||&emsp;&#x25fc;密码至少五个密码的密码历史记录|
||&emsp;&#x25fc;强制使用强密码|
||&#x2713;向每个用户颁发唯一用户帐户;不使用共享帐户。|
||&#x2713;最小特权原则必须适用于所有用户，用于实现此目的的机制应 (即使用组) 。 |
||&#x2713;适当的服务帐户强化必须记录并执行，例如禁用交互式登录、仅限特定主机登录等。 |
||&#x2713;远程访问解决方案 **必须**： |
||&emsp;&#x25fc;利用 MFA (多重身份验证) |
||&emsp;&#x25fc;使用符合或超过传输中数据配置文件的传输保护配置文件中的数据，如附录 A 中所述|
||&#x2713;如果公共 DNS 的管理在作用域内环境之外，则必须将能够进行 DNS 修改的所有用户帐户配置为使用 MFA。|
||**注意** ：云管理门户还需要满足适用的帐户管理要求，请参阅附录 F 了解更多详细信息。|
|**入侵检测和防护 (可选)**| 如果 IDPS (入侵检测和防护系统) 范围内支持环境的外围使用，则额外信用。  以下推荐的控件包括： |
||&#x2713; IDPS 应部署在支持环境的外围 |
||&#x2713; IDPS 签名应保持最新（在过去一天内） |
||&#x2713; TLS 检查配置 IDPS |
||&#x2713;所有入站和出站流量配置 IDPS |
||&#x2713; IDPS 应配置为发出警报 |
|**事件日志记录** |日志记录范围 **必须****包括所有** 范围内系统组件和应用程序，包括恶意软件保护机制。 必须 **记录以下** 事件：|
||&emsp;&#x25fc;用户访问系统组件和应用程序|
||&emsp;&#x25fc;高特权用户执行的所有操作|
||&emsp;&#x25fc;逻辑访问尝试无效|
||&emsp;&#x25fc;特权帐户创建/修改|
||&emsp;&#x25fc;事件日志篡改|
||&emsp;&#x25fc;禁用安全工具;例如，反恶意软件或事件日志记录|
||&emsp;&#x25fc;反恶意软件日志记录;例如，更新、恶意软件检测、扫描失败|
||&emsp;&#x25fc; IDPS/WAF (（如果已) |
||事件日志 **必须** 包含以下信息：|
||&emsp;&#x25fc;用户标识 |
||&emsp;&#x25fc; 事件的类型 |
||&emsp;&#x25fc;日期和时间 |
||&emsp;&#x25fc;成功/失败指示器|
||&emsp;&#x25fc;标签以标识受影响的系统 |
||必须跨 **所有** 范围内系统组件使用时间同步，以协助取证调查。|
||时间同步 **必须** 配置为使用同一主要 (和辅助（如果需要) 源）|
||DMZ (中面向公众的系统) 必须将日志写入内部集中日志记录存储库。 集中日志记录存储库不能位于 DMZ 内。|
||必须保护 **审核** 线索，以确保威胁参与者无法更改日志数据。 只能对授权人员访问集中日志记录存储库。|
||日志 **必须** 立即可用 30 天。 日志记录 **数据** 至少必须保留 90 天。|
|**Reviewing** |审核过程以及支持策略和过程 **必须满足** 以下要求：|
||&#x2713;执行每日日志检查或利用自动日志分析和警报技术查看来自所有范围内系统组件的事件，以确定任何潜在的安全事件。|
||&#x2713;必须立即 **跟进潜在的安全** 事件。|
|**警报** |警报过程以及支持策略和过程 **必须满足** 以下要求： |
||&#x2713;记录的安全事件（对系统、操作或数据的安全造成风险）必须触发即时警报，例如 (列表或) ：|
||&emsp;&#x25fc;特权帐户创建/修改|
||&emsp;&#x25fc;恶意软件事件|
||&emsp;&#x25fc;禁用安全工具|
||&emsp;&#x25fc;事件日志篡改|
||&emsp;&#x25fc; IDPS/WAF (（如果已配置)  |
||&#x2713; 24/7 (员工必须始终) 响应触发的警报。|
|**风险管理**|必须制定并执行风险评估方法，其中包括：|
||&#x2713;正式定义的过程。|
||&#x2713;至少每年执行一次。|
||&#x2713;包括范围内环境中的所有资产。|
||&#x2713;识别针对所有已包含资产的威胁和漏洞。|
||&#x2713; 包括使用已定义的影响和可能性矩阵。|
||&#x2713;会导致创建风险注册和相应的风险处理计划。|
|**事件响应**|需要周密 **的事件响应计划** ， **并且至少** 必须包括：|
||&#x2713;作用域内系统组件和应用程序的最低范围。|
||&#x2713;预期威胁模型的特定事件响应过程。|
||&#x2713;记录的通信过程，确保及时通知所有关键利益干系人以及任何相关外部机构，例如;付款品牌/收购者、监管机构 ([GDPR](#gdpr)) 符合强制报告要求。|
||&#x2713;事件响应根据所总结的经验、组织变更以及行业发展进行更新。|
||&#x2713;事件响应团队成员年度培训。|

## <a name="data-handling-security-and-privacy"></a>数据处理安全和隐私

应用程序用户、中间服务和 ISV 系统之间传输的数据需要通过支持最低 TLS v1.1 的 TLS 连接进行加密保护。*请参阅*[**附录 A。**](#appendix-a)

在您的应用程序检索和存储 M365 数据的位置，您需要实现遵循附录 B 中定义的规范的 [**数据存储加密方案**](#appendix-a)。

### <a name="test-specification"></a>测试规范

|测试 | 控件 |
| -----------------------|-------------------------------- |
|**传输中的数据**| 敏感数据的传输必须使用最低 TLS 1.1，附录 A 中所述的一些例外情况除外。|
||敏感数据的 **传输必须** 按照附录 B 中所述的加密配置文件进行适当加密。|
||必须禁用 TLS 压缩。|
||HSTS (HTTP 严格传输) **必须** 配置为 >= 15552000|
|**Rest 数据**| 敏感数据存储 **必须** 按照附录 B 中所述的加密配置文件进行保护，这些配置文件涵盖加密、算法、密钥大小、哈希和消息身份验证的最低要求。|
||必须记录所有存储的数据类型。|
|**数据保留和处置**|必须通过 **实施至少** 包括以下各项的数据保留和处置策略、过程来将敏感数据存储保持在最低程度：|
||&#x2713;文档，将数据存储量和保留时间限制为法律、法规和/或业务要求所需的时间。|
||&#x2713;文档和部署流程，以在不再需要时安全地删除敏感数据，并符合已记录的策略。|
||&#x2713;文档并部署季度流程，以标识并安全删除超过定义的保留期的已存储敏感数据。|
|**数据访问管理**|限制具有合法业务原因的用户的数据访问可帮助组织防止因经验不足或恶意错误处理敏感数据。 应用/外接程序接收的敏感数据和加密密钥的访问需要经过记录的批准 (电子版或书面) ，供所有访问级别的授权方访问，并且必须包括演示该策略的已批准和验证权限列表，这些权限包含如下指定要求： |
||&#x2713;定义仅对专门需要此类特权访问的角色的访问需求和特权分配。 |
||&#x2713;限制对执行工作职责所需的最小特权的访问。|
||&#x2713;确保所有使用 M365 数据的第三方都符合数据共享协议。|
|**GDPR**| 作为 Microsoft 365 认证过程的一部分，你必须通过以下方法证明遵守 GDPR：|
||&#x2713;由有经验的外部审核公司独立审查 GDPR 一致性。 你可能需要提交报告进行审阅或允许分析员查看报告。 报告应提供足够详细的信息，以便不仅验证外部审核员的评估，而且还提供足以确保外部审核已确认符合 GDPR 的可信度。|
||或|
||&#x2713;提交进一步的证据以提供对数据隐私法律承诺的额外保证，如下所示：|
||&#x25fc; A documented subject access request (SAR) process designed to meet the requests of customers and meet the30 day requirement of the GDPR. 建议提供足够的数据发现工具，以确保在这些时间范围内实现 SAR。 **注意** ：在未使用这些工具的地方，需要演示工作原理，并演示流程如何保证发现所有数据主体的信息。|
||&#x25fc;隐私声明必须存在于网站上，并包含以下信息：
||
||如果独立 GDPR 报告不可用，则必须将以下内容作为 M365 认证评估的一部分进行审阅： |
||&#x2713; A documented subject access request (SAR) process designed to meet the requests of customers and meet the30 day requirement of the GDPR.  建议提供足够的数据发现工具来确保在这些不使用这些工具的时间范围内实现 SAR，你将需要演示这一点的工作原理，并演示这些过程如何保证发现所有数据主体的信息。|
||&#x2713;隐私声明必须存在于网站上，并包含以下信息：|
||&emsp;&emsp;&#x25a1;组织联系人详细信息。|
||&emsp;&emsp;&#x25a1;正在处理的个人数据的类型。|
||&emsp;&emsp;&#x25a1;第 6 条 (*个人数据的*) 。|
||&emsp;&emsp;&#x25a1;数据主体权利的详细信息：|
||&emsp;&emsp;&#x25a1;第 *13 (14* 条通知) 。
||&emsp;&emsp;&#x25a1;第 *15* 条 (主体的) 。|
||&emsp;&emsp;&#x25a1;第 *16* 条 (纠正) 。|
||&emsp;&emsp;&#x25a1;第 *17* 条 (清除) 。|
||&emsp;&emsp;&#x25a1;第 *18* 条 (限制处理) 。|
||&emsp;&emsp;&#x25a1;第 *20 条 (数据可移植* 性) 。|
||&emsp;&emsp;&#x25a1;第 *21* 条 (对象) 。|
||&emsp;&emsp;&#x25a1;与自动决策标记相关的权限，包括 (*第 22* 条) 。|
||&#x2713;第三方共享信息必须签署协议，以确保数据主体数据的处理符合数据隐私法。|

## <a name="optional-external-compliance-frameworks-review"></a>可选的外部合规性框架审查

如果外部安全框架已包含在发布者证明中，认证分析师将需要在 Microsoft 365 认证评估中检查这些安全合规性框架的有效性。
以下受支持的外部安全合规性框架的证据包括：

* [ISMS](#isms) / [IEC](#iec) - IS0/IEC 27001 规范</h5>
* [PCI DSS](#pci-dss)
* [SOC 2](#soc-2)

合规性证据部分中 [确定](#compliance-evidence) 的文档将用于执行此审查。

### <a name="test-specifications"></a>测试规范

&#x2713;应用程序/外接程序支持环境和任何支持业务流程必须包含在任何受支持的外部安全合规性框架范围内，并且必须在提供的文档中清楚地说明。

&#x2713;支持的外部安全合规性框架必须是最新的，即过去 12 个月内 (或 15months 内（如果当前正在进行重新评估，并且可在) 中提供证据）。

&#x2713;支持的外部安全合规性 **框架必须由经** 认证的独立公司执行。

## <a name="appendix-a"></a>附录 A

### <a name="tls-profile-configuration-requirements"></a>TLS 配置文件配置要求

所有网络流量（无论是在虚拟网络、云服务还是数据中心内）都必须使用最低 TLS v1.1 进行保护 (建议使用 TLS v1.2+) 或其他适用的协议。 此要求的例外情况是：

* **HTTP 到 HTTPS 重定向**。 应用可以通过 HTTP 响应，将客户端重定向到 HTTPS，但响应不得包含任何敏感数据 (Cookie、标头、内容) 。 除了重定向到 HTTPS 和响应运行状况探测器外，不允许其他 HTTP 响应。 请参阅下文。
* **运行状况探测器**。 只有当检查方不支持 **HTTPS** 运行状况探测器时，你的应用才能通过 HTTP 响应运行状况探测器。
* **证书访问**。 允许通过 HTTP 访问 CRL、OCSP 和 AIA 终结点，以便进行证书验证和吊销检查。
* **本地通信**。 你的应用可以使用 HTTP (或其他非受保护协议) 不离开操作系统的通信，例如 e. g. 连接到 localhost 上公开的 Web 服务器终结点。

必须 **禁用** TLS 压缩。

## <a name="appendix-b"></a>附录 B

### <a name="encryption-profile-configuration-requirements"></a>加密配置文件配置要求

仅允许加密基元和参数，如下所示：

### <a name="symmetric-cryptography"></a>对称加密

**加密**

&emsp;&#x2713;仅允许使用 AES、BitLocker、一线或 TDES。 任何受支持的密钥长度 >=128 都允许使用 (128、192 和 256 位) 并且建议使用 (256 位密钥) 。

&emsp;&#x2713;仅允许 CBC 模式。 每个加密操作必须使用新的、随机生成的初始化矢量 (IV) 。

&emsp;&#x2713;不允许使用流密码（如 RC4）。 

**哈希函数**

&emsp;&#x2713;所有新代码都必须使用 SHA-256、SHA-384 或 SHA-512 (统称为 SHA-2) 。 输出可能会被截断为不小于 128 位

&emsp;&#x2713; SHA-1 可能仅用于兼容性原因。

&emsp;&#x2713; MD5、MD4、MD2 和其他哈希函数，即使对于非加密应用程序，也不允许使用。

**邮件身份验证**

&emsp;&#x2713;所有新代码都必须将 HMAC 与批准的哈希函数之一一使用。 HMAC 的输出可能会被截断为不小于 128 位。

&emsp;&#x2713; HMAC-SHA1 可能仅用于兼容性原因。

&emsp;&#x2713; HMAC 密钥必须至少为 128 位。 建议使用 256 位密钥。

### <a name="asymmetric-algorithms"></a>非对称算法

**加密**

&emsp;&#x2713; RSA。 Key **必须至少** 为 2048 位，并且必须使用 OAEP 填充。 仅出于兼容性原因才允许使用 PKCS 填充。

**Signatures**

&emsp;&#x2713; RSA。 Key **必须至少** 为 2048 位，并且必须使用 PSS 填充。 仅出于兼容性原因才允许使用 PKCS 填充。

&emsp;&#x2713;ECDSA。 Key **必须至少** 为 256 位。 必须使用 NIST P-256、P-384 或 P-521 曲线。

**密钥交换**

&emsp;&#x2713; ECDH。 Key **必须至少** 为 256 位。 必须使用 NIST P-256、P-384 或 P-521 曲线。

&emsp;&#x2713; ECDH。 Key **必须至少** 为 256 位。 必须使用 NIST P-256、P-384 或 P-521 曲线。

## <a name="appendix-c"></a>附录 C

### <a name="evidence-collection--delta-for-iso-27001"></a>Evidence Collection – ISO 27001 的 Delta

如果已获得 ISO27001 合规性，则以下增量的 (差距) ISO 27001 未完全覆盖，至少需要作为此 Microsoft 365 认证的一部分进行审核。

> [!NOTE]
> 作为 Microsoft 365 认证评估的一部分，认证分析师将确定任何映射的 ISO 27001 控制措施是否未作为 ISO 27001 评估的一部分包含在内，并可能决定对发现包含的控制措施进行示例验证，以提供进一步保证。 ISO 27001 中缺少的任何要求都需要包含在 Microsoft 365 认证评估活动中。

**恶意软件保护 – 防病毒**

如果已使用应用程序控制对恶意软件进行保护，且在 ISO 27001 报告中进行了证明，则无需进一步调查。 如果没有应用程序控制，认证分析师将需要识别和评估应用程序控制机制的证据，以防止恶意软件在环境中触发。 这将要求您：

* 演示防病毒软件正在所有采样的系统组件上运行。

* 演示跨所有采样的系统组件配置了防病毒功能，以自动阻止恶意软件、隔离&警报或发出警报。

* 防病毒软件 **必须配置为** 记录所有活动。

**修补程序管理 – 修补**

由于 ISO 27001 审核未专门评估此类别，因此将需要：

* 供应商不再支持的软件组件和 **操作系统不得在** 环境中使用。 必须制定支持策略，以确保将不受支持的软件组件/操作系统从环境中删除，并且必须制定一个流程来确定软件组件何时结束使用

**漏洞扫描**  

由于 ISO 27001 审核未专门评估此类别，因此将需要：

* 证明执行季度内部和外部漏洞扫描。

* 确认支持文档已根据风险级别和规范进行漏洞修正，如下所示：
 
 &#x2713;解决与内部扫描的风险分级一致的所有严重和高风险问题。
 
 &#x2713;外部扫描的风险级别，解决所有关键、高和中等风险问题。
 
 &#x2713;演示修正是按照记录漏洞修正策略进行。

**防火墙 – 防火墙 (或等效技术)**

由于 ISO 27001 审核未专门评估此类别，因此将需要：

* 演示防火墙安装在作用域内环境的边界上。

* 演示防火墙安装在 DMZ 和受信任的网络之间。

*   演示所有公共访问在 DMZ 中终止。

*   演示在安装到实时环境之前更改了默认管理凭据。

*   演示所有允许通过防火墙 (流量) 通过授权过程，这导致记录具有业务理由的所有流量。

*   演示所有防火墙均配置为丢弃未明确定义的流量。

*   演示防火墙仅支持所有非控制台管理界面上的强加密。

*   演示向 Internet 公开的防火墙的非控制台管理接口支持 MFA。

*   证明防火墙规则评审至少每 6 个月执行一次

**防火墙 – WAF (Web 应用程序)**  

如果部署 WAF 以帮助防范 Web 应用程序威胁和应用程序可能暴露给的漏洞，将提供额外的信用。 当存在 WAF 或类似项时，这将需要你：

* 演示 WAF 在主动防御模式下配置，或通过警报进行更多监视。

* 演示 WAF 配置为支持 SSL 卸载。

* 根据 OWASP 核心规则集 (3.0 或 3.1) 配置，以抵御以下大多数攻击类型：

&#x2713;协议和编码问题。

&#x2713;标头注入、请求拆分和响应拆分。

&#x2713;文件和路径遍历攻击。

&#x2713;远程文件包含 (RFI) 攻击。

&#x2713;远程代码执行攻击。

&#x2713; PHP 注入攻击。

&#x2713;跨网站脚本攻击。

&#x2713; SQL注入攻击。

&#x2713;会话修复攻击。

**更改控件**

由于 ISO 27001 审核未专门评估更改请求流程的一些元素，因此将需要：

* 演示更改请求具有以下详细信息：

&#x2713;记录的影响。

&#x2713;执行哪些功能测试的详细信息。

&#x2713;任何退出过程的详细信息。

* 演示在更改完成后执行功能测试。

* 演示执行功能测试后注销更改请求。

**帐户管理**

由于 ISO 27001 审核没有专门评估帐户管理流程的一些要素，因此将需要：

*   演示如何&#x2713;重放攻击，以缓解重播攻击 (如 MFA、Kerberos) 。
*   演示如何禁用或删除 3 个月内未使用的帐户。
*   &#x2713;或其他合适的缓解必须配置为保护用户凭据。 以下最低密码策略应用作指南：

&#x2713;最短密码长度为 8 个字符。

&#x2713;帐户锁定阈值不超过 10 次。
 
&#x2713;密码至少五个密码的密码历史记录。
 
&#x2713;强制使用强密码。
 
*   演示已针对所有远程访问解决方案配置 MFA。

*   演示在所有远程访问解决方案上配置了强加密。

*   如果公共 DNS 的管理在作用域内环境之外，则必须将能够进行 DNS 修改的所有用户帐户配置为使用 MFA。

**入侵检测和防护 (可选)**

由于 ISO 27001 审核未专门评估入侵检测和防护服务 (IDPS) 流程的一些要素，因此，这将要求您：

*   应在支持 **环境的** 外围部署 IDPS。

*   IDPS **签名应** 保持最新（在过去一天内）。

*   应为 TLS 检查配置 **IDPS。**

*   应为 **所有** 入站和出站流量配置 IDPS。

*   应 **配置** IDPS 以发出警报。

**事件日志记录**

由于 ISO 27001 审核未专门评估安全事件日志记录流程的一些元素，因此将需要：

* 证明面向公众的系统正在登录到不在 DMZ 内的集中日志记录解决方案。

* 演示至少 30 天的日志记录数据如何立即可用，并保留 90 天。

**查看 (日志记录数据)**

由于 ISO 27001 审核未专门评估此类别的某些元素，这将要求您：

*   演示如何执行每日日志检查，以及如何标识异常和异常，以演示如何处理这些异常和异常。

**警报**

由于 ISO 27001 审核未专门评估此类别的某些元素，这将要求您：

* 演示如何将安全事件配置为触发警报以立即会审。

* 演示员工如何 24/7 响应安全警报。

**风险管理**

由于 ISO 27001 审核未专门评估风险评估流程的一些要素，这将要求您：

* 证明已建立正式的风险管理流程。

**事件响应**

由于 ISO 27001 审核未专门评估事件响应策略和流程的一些要素，因此需要您：

*   证明事件响应计划/过程包括：

&#x2713;预期威胁模型的特定响应过程。

&#x2713;事件处理功能，与 NIST 网络安全框架 (识别、保护、检测、响应、恢复) 。
 
&#x2713; IRP 涵盖范围内系统。
 
&#x2713;事件响应团队年度培训。

## <a name="appendix-d"></a>附录 D

### <a name="evidence-collection--deltas-for-pci-dss"></a>Evidence Collection – PCI DSS 的增量

如果已经获得 PCI DSS 合规性，以下 delta 的 (差距) PCI DSS 未完全覆盖，至少需要作为此 Microsoft 365 认证的一部分进行审核。

> [!NOTE]
> 作为 Microsoft 365 认证评估的一部分，认证分析师将确定任何映射的 PCI DSS 控制措施是否未作为 PCI DSS 评估的一部分包含在内，并可能决定对发现包含的控制措施进行采样以提供进一步保证。 PCI DSS 中缺少的任何要求都需要包含在 Microsoft 365 认证评估活动中。

**恶意软件保护 - 应用程序控制**

如果恶意软件防护是通过防病毒进行，且在 PCI DSS 报告中进行了证明，则无需进一步调查。 如果没有防病毒功能，认证分析师将需要识别和评估应用程序控制机制的证据，以防止恶意软件在环境中触发。 这将要求您： 

*   演示如何执行应用程序审批并确认已完成此操作。

*   演示存在具有业务理由的已批准应用程序的完整列表。

*   提供或演示支持文档，详细说明了如何配置应用程序控制软件以满足特定应用程序控制机制 (如允许列表、代码签名等) 。

*   演示跨所有示例系统组件，应用程序控件配置为已记录。

**修补程序管理 – 风险排名**

由于 PCI DSS 审核未专门评估此类别，这将要求您：

* 演示如何执行漏洞的风险分级。

**漏洞扫描**

由于 PCI DSS 审核未专门评估此类别，这将要求您：

* 证明修正是按照记录漏洞修正策略内行进行的。

**防火墙 – 防火墙 (或等效技术)**

由于 PCI DSS 审核未专门评估此类别，这将要求您：

* 演示防火墙仅支持所有非控制台管理界面上的强加密。

* 演示向 Internet 公开的防火墙的非控制台管理接口支持 MFA。

如果部署了 Web 应用程序防火墙 (WAF) 以帮助防范应用程序可能暴露给的 Web 应用程序威胁和漏洞，将提供额外的信用。 当存在 WAF 或类似项时，这将需要你：

* 演示 WAF 在主动防御模式下配置，或通过警报进行更多监视。

* 演示 WAF 配置为支持 SSL 卸载。

* 根据 OWASP 核心规则集 (3.0 或 3.1) 配置，以抵御以下大多数攻击类型：

&#x2713;协议和编码问题。

&#x2713;标头注入、请求拆分和响应拆分。

&#x2713;文件和路径遍历攻击。

&#x2713;远程文件包含 (RFI) 攻击。

&#x2713;远程代码执行攻击。

&#x2713; PHP 注入攻击。

&#x2713;跨网站脚本攻击。

&#x2713; SQL注入攻击。

&#x2713;会话修复攻击。

**更改控件**

由于 PCI DSS 审核未专门评估更改请求流程的一些元素，因此这将要求您：

* 演示在生产环境中提出更改请求之前。

* 演示更改在进入生产之前获得授权。

* 演示在更改完成后执行功能测试。

* 演示执行功能测试后注销更改请求。

**安全软件开发/部署**

由于 PCI DSS 审核不会专门访问安全软件开发和部署流程的一些元素;这将需要你：

* 代码库必须受 MFA 保护。

*   必须实施适当的访问控制，以保护代码库免受恶意代码修改。

**帐户管理**

由于 PCI DSS 审核未专门评估帐户管理流程的一些要素，这将要求您：

* 演示如何实施授权机制来缓解重播攻击 (例如 MFA、Kerberos) 。

* 必须将强密码策略或其他合适的缓解配置为保护用户凭据。 以下最低密码策略应用作指南： 

&#x2713;最短密码长度为 8 个字符。

&#x2713;帐户锁定阈值不超过 10 次。

&#x2713;密码至少五个密码的密码历史记录。

&#x2713;强制使用强密码。

* 演示在所有远程访问解决方案上配置了强加密。

* 如果公共 DNS 的管理在作用域内环境之外，则必须将能够进行 DNS 修改的所有用户帐户配置为使用 MFA。

**入侵检测和防护 (可选)**

由于 PCI DSS 审核未专门评估 IDPS (的入侵检测和防护服务) ，这将要求您：

* 应为 TLS 检查配置 IDPS。

*   应为所有入站和出站流量配置 IDPS。

**风险管理**

由于 PCI DSS 审核未专门评估风险评估流程的一些要素，这将要求您：

* 演示风险评估包括影响和可能性矩阵。

**事件响应**

由于 PCI DSS 审核未专门评估事件响应策略和流程的一些要素，因此开发人员需要：

* 演示符合 NIST 网络安全框架的事件处理功能 (识别、保护、检测、响应、恢复) 。

## <a name="appendix-e"></a>附录 E

### <a name="evidence-collection---deltas-for-soc-2"></a>证据收集 - SOC 2 的增量

如果已获得 SOC 2 合规性，需要作为此 Microsoft 365 认证一部分查看以下增量的 (差距) 未完全涵盖在 SOC 2 中。

> [!NOTE]
> 作为 Microsoft 365 认证评估的一部分，认证分析师将确定任何映射的 SOC 2 控制措施是否未作为 SOC 2 评估的一部分包含在内，并可能决定对发现包含的控制措施进行采样以提供进一步保证。 SOC 2 评估中缺少的任何要求都需要包含在 Microsoft 365 认证评估活动中。

**恶意软件保护 - 应用程序控制**

如果恶意软件防护是通过防病毒进行，且在 SOC 2 报告中进行了证明，则无需进一步调查。 如果没有防病毒功能，认证分析师将需要识别和评估应用程序控制机制的证据，以防止恶意软件在环境中触发。 这将要求您：

* 提供或演示支持文档，详细说明了如何配置应用程序控制软件以满足特定应用程序控制机制 (如允许列表、代码签名等) 。

* 演示如何执行应用程序审批并确认已完成此操作。

*   演示存在具有业务理由的已批准应用程序的完整列表。

*   演示跨所有示例系统组件，应用程序控件配置为已记录。

**修补程序管理 – 修补**

由于 SOC 2 审核未专门评估此类别，这将要求您：

*   必须在正常修补活动窗口中修复任何低、中、高或关键问题。

*   供应商不再支持的软件组件和操作系统不得在环境中使用。 必须制定支持策略，以确保将不受支持的软件组件/操作系统从环境中删除，并且必须制定一个流程来确定软件组件何时结束使用。

**防火墙 – 防火墙**

由于 SOC 2 审核未专门评估对防火墙访问控制列表的变更控制，这将要求您：

* 演示所有允许通过防火墙 (流量) 通过授权过程，这导致记录具有业务理由的所有流量。

* 演示防火墙规则评审至少每六个月执行一次。

如果部署了 Web 应用程序防火墙 (WAF) 或类似防火墙以帮助防范应用程序可能暴露给的 Web 应用程序威胁和漏洞，将提供额外的信用。 当存在 WAF 或类似项时，这将需要你：

* 演示 WAF 在主动防御模式下配置，或通过警报进行更多监视。

* 演示 WAF 配置为支持 SSL 卸载。

* 根据 OWASP 核心规则集 ( (3.0 或 3.1) 进行配置，以抵御大多数以下攻击类型：

&emsp;&#x2713;协议和编码问题。

&emsp;&#x2713;标头注入、请求拆分和响应拆分。

&emsp;&#x2713;文件和路径遍历攻击。

&emsp;&#x2713;远程文件包含 (RFI) 攻击。

&emsp;&#x2713;远程代码执行攻击。

&emsp;&#x2713; PHP 注入攻击。

&emsp;&#x2713;跨网站脚本攻击。

&emsp;&#x2713; SQL注入攻击。

&emsp;&#x2713;会话修复攻击。

**更改控件**

由于 SOC 2 审核没有专门评估更改请求流程的一些元素，因此需要开发人员：

* 演示如何将开发/测试环境与强制职责分离的生产环境分开。

* 演示在开发/测试环境中如何使用实时数据。

* 演示在更改完成后执行功能测试。

* 演示执行功能测试后注销更改请求。

**安全软件开发/部署**

由于 SOC 2 审核不会专门访问安全软件开发和部署流程的一些元素;这将需要你：

*   您必须已建立并记录涵盖整个软件开发生命周期的软件开发过程。

*   开发人员必须至少每年接受安全软件编码培训。

*   代码库必须受 MFA 保护。

*   必须实施适当的访问控制，以保护代码库免受恶意代码修改。

**帐户管理**

由于 SOC2 审核没有专门评估帐户管理流程的一些要素，因此这将要求您：

*   演示如何实施授权机制来缓解重播攻击 (例如 MFA、Kerberos) 。

*   演示如何禁用或删除 3 个月内未使用的帐户。

*   必须将强密码策略或其他合适的缓解配置为保护用户凭据。 以下最低密码策略应用作指南：

&emsp;&#x2713;最短密码长度为 8 个字符。

&emsp;&#x2713;帐户锁定阈值不超过 10 次。

&emsp;&#x2713;密码至少 5 个的密码历史记录。

&emsp;&#x2713;强制使用强密码

*   演示向所有用户颁发唯一用户帐户。

*   如果公共 DNS 的管理在作用域内环境之外，则必须将能够进行 DNS 修改的所有用户帐户配置为使用 MFA。

**入侵检测和防护 (可选) 。**

由于 SOC 2 审核未专门评估 IDPS (IDPS) 的一些元素，因此这将要求您：

*   IDPS 签名应保持最新（在过去一天内）

*   应为 TLS 检查配置 IDPS

*   应为所有入站和出站流量配置 IDPS

**事件日志记录**

由于 SOC 2 审核没有专门评估安全事件日志记录流程的一些元素，因此这将要求您：

* 演示如何在示例集内的所有系统组件上将以下系统配置为记录以下事件

&emsp;&#x2713;用户访问系统组件和应用程序 (应用程序) 。

&emsp;&#x2713;高特权用户执行的所有操作。

&emsp;&#x2713;无效的逻辑访问尝试。

演示记录的事件包含;至少，以下信息：

&emsp;&#x2713;用户。

&emsp;&#x2713;事件的类型。

&emsp;&#x2713;日期和时间。

&emsp;&#x2713;"成功/失败"指示器。

&emsp;&#x2713;标签来标识受影响的系统。

*   演示示例集内的所有系统组件均配置为使用时间同步，并且这些组件与主要/辅助时间服务器相同。

* 证明面向公众的系统正在登录到不在 DMZ 内的集中日志记录解决方案。

*   证明面向公众的系统正在登录到不在 DMZ 内的集中日志记录解决方案。

* 演示如何保护集中日志记录解决方案免受日志记录数据未经授权的篡改。

* 演示至少 30 天的日志记录数据如何立即可用，并保留 90 天以上。

**风险管理**

由于 SOC2 审核没有专门评估风险评估流程的一些要素，因此需要您：

* 证明至少每年进行一次正式的风险评估。

*事件响应。*

由于 SOC2 审核没有专门评估事件响应策略和流程的一些要素，因此，这将要求您：

* 证明事件响应计划/过程包括：

&emsp;&#x2713;预期威胁模型的特定响应过程。

&emsp;&#x2713;记录的通信过程，以确保及时通知关键利益干系人 (支付品牌/收购者、监管机构、监管机构、控制器、客户等。

## <a name="appendix-f"></a>附录 F

### <a name="hosting-deployment-types"></a>托管部署类型

Microsoft 确认你将在不同的托管环境中部署应用程序并存储应用/外接程序代码。 Microsoft 365 认证中某些安全控件的整体职责取决于所使用的托管环境。 附录 F 查看常见部署类型，并针对评估过程中评估的安全控件进行映射。 已确定以下托管部署类型：

|  |  |
|-----|------|
|**ISV 托管**|ISV 托管类型可以定义为你负责用于支持应用/外接程序环境的基础结构。 这可以在物理上位于您自己的数据中心或具有共同位置服务的第三方数据中心内。 最终，您拥有对支持基础结构和操作环境的完全所有权和管理控制。|
|**IaaS (服务)  (**https://azure.microsoft.com/en-gb/overview/what-is-iaas/)|基础结构即服务是一项服务提供的服务，通过该服务，云服务提供商和云解决方案提供商代表其 (基础结构) 。 通常，云解决方案提供商负责网络、存储、物理服务器和虚拟化基础结构。 操作系统、中间件、运行时、数据和应用程序由你负责。 防火墙功能也将由第三方进行管理和维护，但维护防火墙规则基础通常仍由消费者负责。|
|**PaaS (平台作为服务/无)  (**https://azure.microsoft.com/en-gb/overview/what-is-paas/)| 借助平台即服务，你可以预配提供可以使用的服务的托管平台。 无需执行 sysadmin 功能，因为操作系统和支持基础结构由 CSP 管理。 当组织不希望呈现 Web 服务，而是专注于创建 Web 应用程序源代码和在云托管 Web 服务上发布 Web 应用程序时，通常会使用这种方法。  另一个示例可能是数据库服务，其中向数据库提供连接，但支持基础结构和数据库应用程序从使用者抽象。   **注意：无服务器和 PaaS 类似，因此对于 Microsoft 365 认证托管部署类型的无服务器和 PasS，这两者被视为相同**|
|**混合托管**|使用混合托管类型，可以利用多种托管类型来支持支持环境的各个部分。 这可能是在多个 M365 堆栈中利用应用/外接程序的情况。 尽管 Microsoft 365 认证将支持跨多个 M365 服务开发应用/加载项，但需要根据每个适用的"托管类型映射"评估跨应用/外接程序) 支持环境的整个 (。 有时，您可以对单个外接程序使用不同的托管类型，如果执行的是这一点，则条件的适用性仍然需要在各种托管类型中遵循"托管类型映射"条件。|
|**共享托管**|共享托管是你将环境托管在由多个单个使用者共享的平台中的地方。 由于采用云，共享托管并不常见，因此未编写 Microsoft 365 认证规范来说明这一点。 如果认为正在使用此功能，请联系 Microsoft，因为需要创建其他要求，以考虑此类型托管类型下的其他风险。|


## <a name="appendix-g"></a>附录 G

### <a name="microsoft-365-certification-process-workflow"></a>Microsoft 365 认证流程工作流

![工作流](ProcessFlow.jpg)

## <a name="learn-more"></a>了解详细信息

[Microsoft 365 应用合规性计划概述](~/overview.md)  
[什么是 Microsoft 365 应用发布服务器证明？](~/docs/attestation.md)  
[什么是 Microsoft 365 认证？](~/docs/enterprise-app-certification-guide.md)

## <a name="glossary"></a>术语表

### <a name="aia"></a>AIA

*颁发机构信息访问是一种服务位置描述符，用于查找证书颁发机构证书。

### <a name="crl"></a>CRL

*证书吊销列表为安全套接字层 (SSL) 终结点提供了一种验证从远程主机收到的证书是否有效和可信赖的方式。

### <a name="cvss-score"></a>CVSS 分数

*常见漏洞评分系统是一个已发布的标准，用于衡量漏洞并基于漏洞的严重性计算数字分数。

### <a name="cvss-patch-management-guidelines"></a>CVSS 修补程序管理指南

* Critical (9.0 - 10.0) 
* 高 (7.0 - 8.9) 
* 中等 (4.0 - 6.9) 
* 低 (0.0 - 3.9) 

### <a name="dmz"></a>DMZ

*安全区域是物理或逻辑中间网络，可直接与外部或非属性网络交互，同时使主机的内部专用网络保持独立。

### <a name="euii"></a>EUII

*最终用户可识别信息*。

### <a name="gdpr"></a>GDPR

*一般数据保护条例是欧盟 (欧盟) 欧盟隐私和数据保护条例，适用于所有欧盟公民的数据，无论您的应用程序网站位于何处。

### <a name="hsts"></a>HSTS

*HTTP 严格传输安全利用 HTTP 响应标头，指示 Web 浏览器仅通过 HTTPS 访问内容。  这是旨在防止降级攻击和 Cookie 劫持。

### <a name="iec"></a>IEC

*国际工业委员会。

### <a name="isms"></a>ISMS

*信息安全管理系统。

### <a name="isv"></a>ISV

独立安全供应商是开发、营销和销售第三方软件和硬件平台上运行的软件的个人和组织。

### <a name="iso-27001"></a>ISO 27001

信息安全管理系统规范框架，用于组织风险管理策略和过程过程中的所有技术控制。

### <a name="lfi"></a>LFI

*本地文件* 包含允许攻击者通过 Web 浏览器将文件包含在服务器上。

### <a name="nist"></a>NIST

美国国家标准协会 *(* NIST) （美国商务部的非监管机构）为美国公共部门组织提供指导，以评估和批准其预防、检测和响应网络攻击的能力。

### <a name="non-significant-changes"></a>非重大更改

* 次要 Bug 修复。
* 性能改进较小。
* 操作系统/库/客户端和服务器应用程序修补程序。

### <a name="ocsp"></a>OCSP

*联机证书状态协议* 用于检查 X.509 数字证书的吊销状态。

### <a name="oii"></a>OII

*组织可识别信息*。

### <a name="owasp"></a>OWASP

*打开 Web 应用程序安全项目*。

### <a name="pci-dss"></a>PCI DSS

*支付卡行业数据安全标准*，一个维护全球信用卡数据安全标准的组织。

### <a name="pen-testing"></a>笔测试

*渗透测试* 是一种通过模拟恶意攻击来查找攻击者可以利用的安全漏洞来测试 Web 应用的方法。

### <a name="saml"></a>SAML

*安全声明标记语言* 是一种在用户、标识提供程序和服务提供商之间交换身份验证和授权数据的开放式标准。

### <a name="sensitive-data"></a>敏感数据

* 访问控制数据。
* 客户内容。
* 最终用户标识信息。
* 支持数据。
* 公共个人数据。
* 最终用户假名信息。

### <a name="significant-changes"></a>重大更改

* 宿主环境的重定位。
* 对支持基础结构的主要升级;例如，实现新防火墙、主要升级到面向前端的服务等。
* 向你的应用添加功能和/或扩展。
* 用于捕获其他敏感数据的应用更新。
* 对应用数据流或授权模型所做的更改
* 添加 API 终结点或 API 终结点函数。

### <a name="soc-2"></a>SOC 2

*服务组织控制 2* 是一种技术审核过程，包含五项信任服务原则，以确保服务提供商安全地管理组织客户端的数据和隐私。

### <a name="ssl"></a>SSL

*安全套接字层*。

### <a name="tls"></a>TLS

*传输层安全性*。
